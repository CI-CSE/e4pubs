note
	description: "Test harness."

class CLIENT

create
	test

feature {NONE} -- Initialization

	test
			-- Using composites.
		note
			status: creator
		local
			c1, c2, c3: NODE
		do
			create c1.make (1)
			create c2.make (2)
			create c3.make (0)

			c1.acquire (c2)
			check c1.value = 2 end

			c2.acquire (c3)
			check c1.value = 2 end
			check c2.value = 2 end
			check c3.value = 0 end

			-- Todo: this assume is here because we do not have an exact definition of descendants yet:
			check assume: c1.descendants = {MML_SET [NODE]}.empty_set & c3 & c2 & c1 end
			c3.acquire (c1)
			check c1.value = c2.value end
			check c2.value = c3.value end
			check c3.value = 2 end
		end

end
